<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <!-- Main CSS - fixed path -->
    <link rel="stylesheet" href="./../styles/styles.css">
    <!-- Product Detail CSS - fixed path -->
    <link rel="stylesheet" href="./../styles/productDetail.css">
    <!-- Raleway Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto+Flex:opsz,wght,GRAD@8..144,100..1000,29&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Additional styles for better functionality */
        .container {
            display: none;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .show-filters .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .filter-group {
            flex: 1;
            min-width: 150px;
            margin-bottom: 15px;
        }
        
        .filter-title {
            margin-bottom: 8px;
            font-weight: 600;
            color: #0C3322;
        }
        
        .options {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .options li {
            margin-bottom: 5px;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropbtn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-family: inherit;
            font-size: inherit;
            padding: 5px;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 4px;
        }
        
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .btnfilter {
            padding: 8px 15px;
            background: #0C3322;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        #resetFilters {
            padding: 8px 15px;
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .grow-hover {
            transition: transform 0.2s;
        }
        
        .grow-hover:hover {
            transform: scale(1.05);
            cursor: pointer;
        }
        
        .filter-controls {
            width: 100%;
            margin-top: 10px;
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .sort-option {
            cursor: pointer;
            padding: 8px 12px;
        }
        
        .sort-option:hover {
            background-color: #eaeaea;
        }
        
        /* Product grid styling */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .product-link {
            text-decoration: none;
            color: inherit;
        }
        
        .product-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .product-img {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }
        
        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-details {
            padding: 15px;
        }
        
        .product-details div:first-child {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .product-details div:nth-child(2) {
            color: #0C3322;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .product-details del {
            color: #999;
            font-size: 0.9em;
            margin-left: 5px;
        }
        
        .rating {
            color: #ffc107;
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <section>
        <div class="first-taskbar">
            <div>
                &nbsp;USD&nbsp; Stores
            </div>
            <div>
                Login&nbsp;/&nbsp;Register&nbsp;
            </div>
        </div>
        <div class="header-logo">
            <div class="imgdiv">
                <img src="./../Images/logo.png" alt="Company Logo" class="logo">
            </div>
            <div class="shopOurStoryRecContact">
                <div class="grow-hover">Shop
                    <i class="fa-solid fa-chevron-down"></i>
                </div>
                <div class="grow-hover">Our Story</div>
                <div class="grow-hover">Receipies</div>
                <div class="grow-hover">Contact</div>
            </div>
            <div style="display: flex; flex-direction: row; justify-content: space-around; width: 15%;">
                <i class="fa-solid fa-magnifying-glass grow-hover" style="color: black;" aria-label="Search"></i>
                <i class="fa-regular fa-heart grow-hover" aria-label="Wishlist"></i>
                <i class="fa-solid fa-cart-shopping grow-hover" aria-label="Shopping Cart"></i>
            </div>
        </div>
        <div style="width: 100%;">
            <img src="./../Images/product.png" alt="Product banner" style="width: 100%;">
        </div>
        <div>
            <div style="font-weight: 700; padding: 10px;">Products(18)</div>
        </div>
        <div class="filterDiv">
            <div class="filter">
                <div class="filterListMenu">
                    <button id="filterToggle" class="btnfilter grow-hover">Filter</button>
                    <i class="fa-solid fa-table-cells grow-hover" style="font-size: 25px;" aria-label="Grid view"></i>
                    <i class="fa-solid fa-list-ul grow-hover" style="font-size: 25px;" aria-label="List view"></i>
                </div>
                <div>
                    Sort By &nbsp; | &nbsp; 
                    <div class="dropdown">
                        <button class="dropbtn grow-hover" style="background-color: #0C3322;">Alphabetically A-Z &nbsp; <i class="fa-solid fa-chevron-down"></i></button>
                        <div class="dropdown-content">
                            <a href="#" class="sort-option" data-sort="name-asc">Alphabetically A-Z</a>
                            <a href="#" class="sort-option" data-sort="name-desc">Alphabetically Z-A</a>
                            <a href="#" class="sort-option" data-sort="price-asc">Price: Low to High</a>
                            <a href="#" class="sort-option" data-sort="price-desc">Price: High to Low</a>
                            <a href="#" class="sort-option" data-sort="latest">Latest</a>
                            <a href="#" class="sort-option" data-sort="date">Date</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!---CheckBox------>
        <div class="container">
            <!-- Category -->
            <div class="filter-group" data-key="category">
                <h3 class="filter-title">Categories</h3>
                <ul class="options">
                    <li><label><input type="checkbox" name="category" value="noodles"> <span>Dozen Jars</span></label></li>
                    <li><label><input type="checkbox" name="category" value="jars"> <span>Jar</span></label></li>
                    <li><label><input type="checkbox" name="category" value="masala"> <span>Masala</span></label></li>
                    <li><label><input type="checkbox" name="category" value="matcha"> <span>Matcha</span></label></li>
                </ul>
            </div>

            <!-- Type -->
            <div class="filter-group" data-key="type">
                <h3 class="filter-title">Type</h3>
                <ul class="options">
                    <li><label><input type="checkbox" name="type" value="single"> <span>Single Pack</span></label></li>
                    <li><label><input type="checkbox" name="type" value="multi"> <span>Multi Set</span></label></li>
                </ul>
            </div>

            <!-- Flavours -->
            <div class="filter-group" data-key="flavour">
                <h3 class="filter-title">Flavours</h3>
                <ul class="options">
                    <li><label><input type="checkbox" name="flavour" value="spicy"> <span>Spicy</span></label></li>
                    <li><label><input type="checkbox" name="flavour" value="sweet"> <span>Sweet</span></label></li>
                    <li><label><input type="checkbox" name="flavour" value="savory"> <span>Savory</span></label></li>
                </ul>
            </div>

            <div class="filter-controls">
                <!-- <button id="applyFilters" class="btnfilter">Apply Filters</button> -->
                <button id="resetFilters" type="button">Reset</button>
            </div>
        </div>

        <!---Card Starts---->
        <div class="product-grid">
            <!-- Product cards will be inserted here by JavaScript -->
        </div>
        <div class="footer" style="position: relative;">
            <table
                style="position: absolute; left: 170px; top: 40px; width: 400px; border-collapse: separate; border-spacing: 3px;">
                <tr>
                    <th style="text-align: left; padding: 3px; color: #0C3322;">LINKS</th>
                    <th style="text-align: left; padding: 3px; color: #0C3322;">INFORMATION</th>
                </tr>
                <tr>
                    <td style="padding: 3px; color: #565858;">About</td>
                    <td style="padding: 3px; color: #565858;">Terms and Service</td>
                </tr>
                <tr>
                    <td style="padding: 3px; color: #565858;">Contact Us</td>
                    <td style="padding: 3px; color: #565858;">Refund Policy</td>
                </tr>
                <tr>
                    <td style="padding: 3px; color: #565858;">Customer Service</td>
                    <td style="padding: 3px; color: #565858;">Press</td>
                </tr>
                <tr>
                    <td style="padding: 3px; color: #565858;">FAQs</td>
                    <td style="padding: 3px; color: #565858;"></td>
                </tr>
                <tr>
                    <td style="padding: 3px; color: #565858;">Site Maps</td>
                    <td style="padding: 3px; color: #565858;"></td>
                </tr>
            </table>
            <div style="position: absolute; right: 30px; top: 130px; width: 45%;">
                <img src="./../Images/VisaMastercardPay.png" alt="" style="width: 100%;">
            </div>
        </div>
        <!---Footer content remains the same-->
        <div class="bottomFooter">
            <div style="background-color: #0C3322;" class="footerIcons">
                <a href="https://www.facebook.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-facebook" style="color: white;"></i>
                </a>
                <a href="https://www.twitter.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-twitter" style="color: white;"></i>
                </a>
                <a href="https://www.instagram.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-instagram" style="color: white;"></i>
                </a>
                <a href="https://www.youtube.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-youtube" style="color: white;"></i>
                </a>
                <a href="https://www.pinterest.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-pinterest" style="color: white;"></i>
                </a>
                <a href="https://www.linkedin.com" target="_blank" class="grow-hover">
                    <i class="fa-brands fa-linkedin" style="color: white;"></i>
                </a>
            </div>
            <div style="background-color: #0C3322; color: white;" class="footerIcons">
                &copy; 2021 Abolichi
            </div>
        </div>

    </section>

    <script>
        // Product data
        const products = [
            {
                id: 'jars',
                name: 'JAR of a dozen',
                category: 'noodles',
                type: 'multi',
                flavour: 'spicy',
                image: './../Images/JARS.png',
                price: 127.00,
                originalPrice: 167.87,
                rating: 5,
                reviews: 32,
                date: '2023-10-15'
            },
            {
                id: 'jar',
                name: 'Jar from the market',
                category: 'jars',
                type: 'single',
                flavour: 'savory',
                image: './../Images/JAR.png',
                price: 137.00,
                originalPrice: 177.87,
                rating: 5,
                reviews: 32,
                date: '2023-09-20'
            },
            {
                id: 'masala',
                name: 'Spicy Masala Mix',
                category: 'masala',
                type: 'single',
                flavour: 'spicy',
                image: './../Images/MASALA PIC.png',
                price: 127.00,
                originalPrice: 167.87,
                rating: 5,
                reviews: 32,
                date: '2023-11-05'
            },
            {
                id: 'matcha',
                name: 'Matcha Green Tea',
                category: 'matcha',
                type: 'multi',
                flavour: 'sweet',
                image: './../Images/ABO MAT CHA.png',
                price: 127.00,
                originalPrice: 167.87,
                rating: 5,
                reviews: 32,
                date: '2023-08-12'
            }
        ];

        // Generate multiple products for demonstration
        const allProducts = [];
        for (let i = 0; i < 4; i++) {
            products.forEach(product => {
                allProducts.push({...product});
            });
        }

        // Function to render products
        function renderProducts(productsToRender) {
            const productGrid = document.querySelector('.product-grid');
            productGrid.innerHTML = '';
            
            // Update product count
            document.querySelector('div[style="font-weight: 700; padding: 10px;"]').textContent = `Products(${productsToRender.length})`;
            
            productsToRender.forEach(product => {
                const productElement = document.createElement('a');
                productElement.href = `./order.html?product=${product.id}`;
                productElement.className = 'product-link';
                
                productElement.innerHTML = `
                    <div class="product-card" data-category="${product.category}" data-type="${product.type}" data-flavour="${product.flavour}">
                        <div class="product-img">
                            <img src="${product.image}" alt="${product.name}" />
                        </div>
                        <div class="product-details">
                            <div>${product.name}</div>
                            <div>$${product.price.toFixed(2)} <del>${product.originalPrice.toFixed(2)}</del></div>
                            <div class="rating">${'★'.repeat(product.rating)}${'☆'.repeat(5-product.rating)} | ${product.reviews} reviews</div>
                        </div>
                    </div>
                `;
                
                productGrid.appendChild(productElement);
            });
        }

        // Filter and sort functionality
        (function () {
            const groups = ["category", "type", "flavour"];
            let currentSort = 'name-asc';
            let filteredProducts = [...allProducts];

            function getSelections() {
                const selected = {};
                groups.forEach(g => {
                    selected[g] = Array.from(document.querySelectorAll(`input[name="${g}"]:checked`))
                        .map(cb => cb.value);
                });
                return selected;
            }

            function filterProducts() {
                const selected = getSelections();
                filteredProducts = allProducts.filter(product => {
                    return groups.every(g => {
                        const picks = selected[g];
                        if (!picks || picks.length === 0) return true;
                        return picks.includes(product[g]);
                    });
                });
                
                sortProducts();
            }

            function sortProducts() {
                switch(currentSort) {
                    case 'name-asc':
                        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'name-desc':
                        filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
                        break;
                    case 'price-asc':
                        filteredProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-desc':
                        filteredProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'latest':
                        filteredProducts.sort((a, b) => new Date(b.date) - new Date(a.date));
                        break;
                    case 'date':
                        filteredProducts.sort((a, b) => new Date(a.date) - new Date(b.date));
                        break;
                }
                
                renderProducts(filteredProducts);
                document.querySelector('.filterDiv .dropbtn').textContent = 
                    getSortLabel(currentSort) + ' \u00A0\u00A0\u00A0 ';
            }

            function getSortLabel(sortType) {
                switch(sortType) {
                    case 'name-asc': return 'Alphabetically A-Z';
                    case 'name-desc': return 'Alphabetically Z-A';
                    case 'price-asc': return 'Price: Low to High';
                    case 'price-desc': return 'Price: High to Low';
                    case 'latest': return 'Latest';
                    case 'date': return 'Date';
                    default: return 'Alphabetically A-Z';
                }
            }

            // Toggle filter visibility
            const filterToggle = document.getElementById('filterToggle');
            if (filterToggle) {
                filterToggle.addEventListener('click', () => {
                    document.querySelector('body').classList.toggle('show-filters');
                });
            }

            // Apply filters button
            const applyFiltersBtn = document.getElementById('applyFilters');
            if (applyFiltersBtn) applyFiltersBtn.addEventListener('click', filterProducts);

            // Live update on checkbox toggle
            document.querySelectorAll('.filter-group input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', filterProducts);
            });

            // Reset
            const resetBtn = document.getElementById('resetFilters');
            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-group input[type="checkbox"]').forEach(cb => cb.checked = false);
                    currentSort = 'name-asc';
                    filterProducts();
                });
            }

            // Sort options
            document.querySelectorAll('.sort-option').forEach(option => {
                option.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentSort = option.dataset.sort;
                    sortProducts();
                });
            });

            // Initialize
            document.addEventListener('DOMContentLoaded', () => {
                renderProducts(allProducts);
                filterProducts();
            });
        })();
    </script>
</body>

</html>